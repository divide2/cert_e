{"version":3,"sources":["uni-app:///main.js","webpack:///D:/projects/cert_e/pages/course/create.vue?6d0a","webpack:///D:/projects/cert_e/pages/course/create.vue?c23e","webpack:///D:/projects/cert_e/pages/course/create.vue?e35c","webpack:///D:/projects/cert_e/pages/course/create.vue?3496","uni-app:///pages/course/create.vue"],"names":["createPage","Page"],"mappings":"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","file":"pages/course/create.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/course/create.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./create.vue?vue&type=template&id=6437c1c7&scoped=true&\"\nvar renderjs\nimport script from \"./create.vue?vue&type=script&lang=js&\"\nexport * from \"./create.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6437c1c7\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/course/create.vue\"\nexport default component.exports","export * from \"-!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./create.vue?vue&type=template&id=6437c1c7&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./create.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Download\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./create.vue?vue&type=script&lang=js&\"","<template>\n  <view>\n    <cu-custom bg-color=\"bg-blue\" is-back>\n      <block slot=\"content\">发布课程</block>\n    </cu-custom>\n    <form ref=\"form\">\n      <view class=\"cu-form-group margin-top\">\n        <view class=\"title\">课程名字</view>\n        <input placeholder=\"必填\" name=\"name\" v-model=\"course.name\"/>\n      </view>\n      <view class=\"cu-form-group\">\n        <view class=\"title\">培训价格</view>\n        <input placeholder=\"必填\" name=\"price\" type=\"number\" v-model=\"course.price\"/>\n      </view>\n      <view class=\"cu-form-group\">\n        <view class=\"title\">招收人数</view>\n        <input placeholder=\"必填\" name=\"capacity\" type=\"number\" v-model=\"course.capacity\"/>\n      </view>\n      <view class=\"cu-form-group margin-top\" @tap=\"chooseAddress\">\n        <view class=\"title\">地址选择</view>\n        <input placeholder=\"请选择地址\" :value=\"course.address\"/>\n      </view>\n      <view class=\"cu-form-group align-start margin-top\">\n        <view class=\"title\">课程简介</view>\n        <textarea maxlength=\"200\" v-model=\"course.description\" placeholder=\"请对课程些简单介绍,200字以内\"></textarea>\n      </view>\n      <view class=\"cu-form-group margin-top\">\n        <view class=\"title\">行业选择</view>\n        <picker @change=\"professionChange\" :value=\"professionPickerIndex\" :range=\"professionPicker\" name=\"profession\"\n                range-key=\"name\">\n          <view class=\"picker\">\n            {{course.professionName?course.professionName:'未选择'}}\n          </view>\n        </picker>\n      </view>\n      <view class=\"cu-form-group\">\n        <view class=\"title\">开始日期</view>\n        <picker mode=\"date\" :value=\"course.startTime\" @change=\"startTimeChange\"\n                name=\"startTime\">\n          <view class=\"picker\">\n            {{course.startTime?course.startTime:'未选择'}}\n          </view>\n        </picker>\n      </view>\n      <view class=\"cu-form-group\">\n        <view class=\"title\">结束日期</view>\n        <picker mode=\"date\" :value=\"course.startTime\" @change=\"endTimeChange\"\n                name=\"endTime\">\n          <view class=\"picker\">\n            {{course.endTime?course.endTime:'未选择'}}\n          </view>\n        </picker>\n      </view>\n\n      <view class=\"cu-list menu margin-top\" @tap=\"toCer\">\n        <view class=\"cu-item arrow\">\n          <view class=\"content\">\n            <text class=\"\">证书选择</text>\n          </view>\n          <view class=\"action\">{{course.certificateName}}</view>\n        </view>\n      </view>\n\n      <!--<view class=\"cu-list menu margin-top\" @tap=\"toCourseDetailEditor\">\n        <view class=\"cu-item arrow\">\n          <view class=\"content\">\n            <text class=\"\">课程详情</text>\n          </view>\n          <view class=\"action\">{{course.details?'有':'无'}}</view>\n        </view>\n      </view>-->\n      <view class=\"cu-form-group align-start margin-top\">\n        <view class=\"title\">课程详情</view>\n        <textarea maxlength=\"-1\" v-model=\"course.details\" placeholder=\"请输入其他课程信息\"></textarea>\n      </view>\n      <view class=\"cu-bar bg-white margin-top\">\n        <view class=\"action\">\n          课程相关图片\n        </view>\n        <view class=\"action\">\n          0/4\n        </view>\n      </view>\n\n      <view class=\"cu-form-group\">\n        <view class=\"grid col-4 grid-square flex-sub\">\n          <view class=\"bg-img\" v-for=\"(item,index) in course.images\" :key=\"item\" @tap=\"viewImage(item)\">\n            <image :src='item' mode='aspectFill'></image>\n            <view class=\"cu-tag bg-red\" @tap.stop=\"delImg(index)\">\n              <text class=\"cuIcon-close\"></text>\n            </view>\n          </view>\n          <view class=\"solids\" @tap=\"chooseImage\" v-if=\"course.images.length<4\">\n            <text class=\"cuIcon-cameraadd\"></text>\n          </view>\n        </view>\n      </view>\n      <view class=\"cu-bar btn-group margin-top margin-bottom\">\n        <button class=\"cu-btn bg-green shadow-blur round lg\" @tap=\"save\">保存</button>\n      </view>\n    </form>\n  </view>\n</template>\n\n<script>\n  import VForm from \"../../components/form/VForm\";\n  import utils from \"../../components/form/utils\";\n  import api from \"@/api/api\"\n\n  const app = getApp()\n  export default {\n    name: \"courseCreate\",\n    components: {VForm},\n    data() {\n      return {\n        professionPicker: [],\n        professionPickerIndex: '',\n        type: 'add',\n        id: '',\n        course: {\n          name: '', // 名字\n          price: null, // 价格\n          address: '', // 地址名字\n          addressId: '', // 地址id\n          description: '无', // 课程描述\n          startTime: '', // 开始时间\n          endTime: '', // 结束时间\n          certificateId: '', // 证书id\n          certificateName: '', // 证书名字\n          arrangement: '无', //buzhi\n          images: [], // 图片\n          details: '', // 图文描述\n          professionId: '', // 行业id\n          capacity: 0,\n          professionName: '' // 行业名字\n        },\n        rules: {\n          name: [\n            {required: true, message: '课程名字不能为空'},\n            {max: 50, message: '课程名字在50字以内'}],\n          price: [\n            {required: true, message: '价格不能为空'},\n            {pattern: /(^[1-9]\\d*(\\.\\d{1,2})?$)|(^0(\\.\\d{1,2})?$)/, message: '请输入正确的价格'}],\n          capacity: [\n            {required: true, message: '招收人数不能为空'},\n            {pattern: /(^[1-9]\\d*$)/, message: \"招收人数必须是数字\"}],\n          address: [\n            {required: true, message: '地址必选'}],\n          // addressId: [\n          //   {required: , message: '地址必选'}],\n          startTime: [\n            {required: true, message: '开课时间必选'}],\n          endTime: [\n            {required: true, message: '结束时间必选'}]\n        }\n      }\n    },\n    onLoad(option) {\n      this.getProfession()\n      if (option.type === 'update') {\n        this.type = option.type\n        this.id = option.id\n        this.getCourse()\n      }\n    },\n    methods: {\n      toCer() {\n        uni.navigateTo({\n          url: '/pages/course/certification/index',\n        })\n      },\n      toCourseDetailEditor() {\n        uni.navigateTo({\n          url: '/pages/editor/editor',\n        })\n      },\n      startTimeChange(e) {\n        this.course.startTime = e.detail.value\n      },\n      endTimeChange(e) {\n        this.course.endTime = e.detail.value\n      },\n      getProfession() {\n        api.get('/v1/professions').then(data => {\n          this.professionPicker = data\n        })\n      },\n      professionChange(e) {\n        this.course.professionName = this.professionPicker[e.detail.value].name\n        this.course.professionId = this.professionPicker[e.detail.value].id\n      },\n      viewImage(item) {\n        uni.previewImage({\n          urls: this.course.images,\n          current: item\n        });\n      },\n      delImg(index) {\n        uni.showModal({\n          title: '删除',\n          content: '确认删除么？',\n          success: res => {\n            if (res.confirm) {\n              this.course.images.splice(index, 1);\n            }\n          }\n        })\n      },\n      chooseImage() {\n        const that = this\n        uni.chooseImage({\n          count: 4, //默认9\n          sizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n          sourceType: ['album'], //从相册选择\n          success: (res) => {\n            res.tempFilePaths.forEach(path => {\n              uni.uploadFile({\n                url: `${app.globalData.baseUrl}/v1/upload/image`,\n                filePath: path,\n                name: 'file',\n                success(res) {\n                  that.course.images.push(res.data)\n                }\n              })\n            })\n          }\n        });\n      },\n      chooseAddress() {\n        // uni.navigateTo({\n        //   url: '/pages/course/address/index'\n        // })\r\n\t\tlet that = this\r\n\t\tuni.chooseAddress({\r\n\t\t\t\t  success(res) {\r\n\t\t\t\t\t  that.course.address = res.provinceName + res.cityName + res.countyName + res.detailInfo\r\n\t\t\t\t      console.log(that.course)\r\n\t\t\t\t  }\r\n\t\t})\n      },\n      save() {\n        utils.validate(this.course, this.rules, (res, errors) => {\n          if (res) {\n            if (this.type === 'add') {\n              api.post('/v1/org/courses', this.course).then(res => {\n                uni.redirectTo({url: '/pages/course/list'})\n              });\n            }\n            if (this.type === 'update') {\n              api.put('/v1/org/courses/' + this.id, this.course).then(res => {\n                uni.redirectTo({url: '/pages/course/list'})\n              });\n            }\n          }\n        })\n      },\n      getCourse() {\n        api.get(`/v1/org/courses/${this.id}`).then(data => {\n          this.course = data\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":""}